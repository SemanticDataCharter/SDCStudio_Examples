{% extends 'test_data3/wizard/wizard_base.html' %}

{% block step_content %}
<div class="row">
    <!-- Read-only DM Metadata -->
    <div class="col-md-6">
        <h6 class="text-muted mb-3">Data Model Information (Read-only)</h6>

        <div class="mb-3">
            <label class="form-label">Data Model Label</label>
            <input type="text" class="form-control field-readonly" value="{{ dm_metadata.TITLE }}" readonly>
        </div>

        <div class="mb-3">
            <label class="form-label">Language</label>
            <input type="text" class="form-control field-readonly" value="{{ dm_metadata.LANGUAGE }}" readonly>
        </div>

        <div class="mb-3">
            <label class="form-label">Encoding</label>
            <input type="text" class="form-control field-readonly" value="{{ dm_metadata.ENCODING }}" readonly>
        </div>

        {% if dm_metadata.DESCRIPTION %}
        <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea class="form-control field-readonly" rows="2" readonly>{{ dm_metadata.DESCRIPTION }}</textarea>
        </div>
        {% endif %}
    </div>

    <!-- Editable Instance Setup -->
    <div class="col-md-6">
        <h6 class="text-muted mb-3">Instance Setup</h6>

        {{ form.non_field_errors }}

        <div class="mb-3">
            <label for="{{ form.instance_version.id_for_label }}" class="form-label required-field">
                Instance Version
            </label>
            {{ form.instance_version }}
            {% if form.instance_version.errors %}
            <div class="invalid-feedback d-block">{{ form.instance_version.errors.0 }}</div>
            {% endif %}
            <small class="form-text text-muted">{{ form.instance_version.help_text }}</small>
        </div>

        <div class="mb-3">
            <label for="{{ form.current_state.id_for_label }}" class="form-label required-field">
                Current State
            </label>
            {{ form.current_state }}
            {% if form.current_state.errors %}
            <div class="invalid-feedback d-block">{{ form.current_state.errors.0 }}</div>
            {% endif %}
            <small class="form-text text-muted">{{ form.current_state.help_text }}</small>
        </div>

        {% if has_protocol %}
        <div class="mb-3">
            <label for="{{ form.protocol.id_for_label }}" class="form-label">
                Protocol
            </label>
            {{ form.protocol }}
            {% if form.protocol.errors %}
            <div class="invalid-feedback d-block">{{ form.protocol.errors.0 }}</div>
            {% endif %}
            <small class="form-text text-muted">{{ form.protocol.help_text }}</small>
        </div>
        {% endif %}

        {% if has_workflow %}
        <div class="mb-3">
            <label for="{{ form.workflow_uri.id_for_label }}" class="form-label">
                Workflow Link
            </label>
            {{ form.workflow_uri }}
            {% if form.workflow_uri.errors %}
            <div class="invalid-feedback d-block">{{ form.workflow_uri.errors.0 }}</div>
            {% endif %}
            <small class="form-text text-muted">{{ form.workflow_uri.help_text }}</small>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
